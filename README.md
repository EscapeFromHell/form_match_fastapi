# Form Match FastAPI

Web-приложение для определения заполненных форм.
В базе данных (MongoDB) хранится список шаблонов форм.
Шаблон формы, это структура, которая задается уникальным набором полей, с указанием их типов.

Пример шаблона формы:
```
{
    "name": "Form template name",
    "field_name_1": "email",
    "field_name_2": "phone"
}
```
Поддерживается четыре типа данных полей: 
1.	email
2.	phone
3.	date
4.	text

Телефон передается в стандартном формате +7 xxx xxx xx xx, дата передается в формате DD.MM.YYYY или YYYY-MM-DD.

В ответ возвращается имя шаблона формы, если она была найдена.
Подходящим считается шаблон, поля которого совпали с полями в присланной форме. 
Совпадающими считаются поля, у которых совпали имя и тип значения. 
Полей в пришедшей форме может быть больше чем в шаблоне, в этом случае шаблон все равно будет считаться подходящим. 
Самое главное, чтобы все поля шаблона присутствовали в форме.

Если подходящей формы не нашлось, будет произведена типизация полей и возвращен ответ в следующем формате:
```
{
    f_name1: FIELD_TYPE,
    f_name2: FIELD_TYPE
}
```

## Технологии
Python, FastAPI, Pydantic, MongoDB, Docker

## Запуск проекта
- Скачайте проект: git clone https://github.com/EscapeFromHell/form_match_fastapi.git
- После скачивания проекта, перейдите в папку проекта: cd form_match_fastapi
- Выполните команду: docker compose up -d --build
- После запуска контейнеров, документация проекта будет доступна по ссылке: 
http://127.0.0.1:8000/docs
- В документации можно использовать POST метод (через body) 
- Для использования GET запроса можно использовать Postman (через query params), запросом передаются данные такого вида: f_name1=value1&f_name2=value2

## Test Script
- В папке есть файл test_requests_script.py. Для его запуска необходимо установить виртуальное окружение (Или запустить скрипт из контейнера Docker).
- Скачать Poetry: pip install poetry
- Для установки виртуального окружения выполнить команду: poetry install
- После установки выполнить команду: python test_requests_script.py

## Примечание
При тестировании через Postman при GET запросе номер необходимо указывать так: %2B7 999 999 99 99

Пример GET запроса в Postman: http://127.0.0.1:8000/api_v1/forms/get_form?full_nam=John Smith&email=some@mail.com&phone_number=%2B7 999 999 99 99